# エリックエヴァンスのドメイン駆動設計入門独習

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->


  - [はじめに](#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB)
    - [ユビキタス言語](#%E3%83%A6%E3%83%93%E3%82%AD%E3%82%BF%E3%82%B9%E8%A8%80%E8%AA%9E)
  - [戦略的モデリング](#%E6%88%A6%E7%95%A5%E7%9A%84%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B0)
    - [コンテキストマッピング](#%E3%82%B3%E3%83%B3%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%83%9E%E3%83%83%E3%83%94%E3%83%B3%E3%82%B0)
  - [アーキテクチャ](#%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3)
  - [ヘキサゴナルアーキテクチャ](#%E3%83%98%E3%82%AD%E3%82%B5%E3%82%B4%E3%83%8A%E3%83%AB%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3)
  - [戦術的モデリング](#%E6%88%A6%E8%A1%93%E7%9A%84%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B0)
    - [集約](#%E9%9B%86%E7%B4%84)
    - [リポジトリ](#%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA)
    - [サービス](#%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9)
    - [ドメインイベント](#%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88)
- [モジュール](#%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## はじめに

```
--- いくら計算したって、不可能だということしかわからない。やるべきことはひとつ、それを可能にすることだけだ。
```

- ソフトウェア開発では常に何かを何かにマッピングしている。
  + オブジェクトをデータベースにマッピングする。
  + オブジェクトをユーザインターフェイスにマッピングする。など

- 軽量dddで進めると、貧弱なドメインモデルができあがってしまいがち
- 明確な境界をつけられたコンテキストをドメインモデルで表したチームで使う言語は真の事業価値をもたらす

### ユビキタス言語

- 単一の境界付けられたコンテキストの中で適用できる

## 戦略的モデリング

- `境界付けられたコンテキスト` とは、ドメインモデルを適用する際の概念的な境界のこと

ユビキタス言語は、その内部でのみモデリングされる。

### コンテキストマッピング

境界付けられたコンテキストどうしのマッピングを示すマッピング

## アーキテクチャ

新しく境界付けられたコンテキストを作ったり、コンテキストマッピングで既存のコンテキストとつながったりするときに
新たにアーキテクチャスタイルを受け入れなければならない場合がある。

## ヘキサゴナルアーキテクチャ

- 六角形のやつ
- サービス指向やREST,イベント駆動のスタイルを実現できる

アーキテクチャよりドメインモデルを注視する


## 戦術的モデリング

境界付けられたコンテキスト内でのモデリングは戦術的に行う。
- 戦術的設計で最も重要なパターンの一つが `集約`

### 集約

- 集約は単一の`エンティティ`で構成されていることもあれば、複数のエンティティや値オブジェクトのあつまりであることもある。
- 集約の生存期間中を通してトランザクション的に一貫性のあるもの

集約をうまくモデリングする方法を身につけるのは極めて重要

### リポジトリ

- 集約のインスタンスを永続化させるもの

### サービス

- ステートレス
- エンティティや値オブジェクト上で行うには不自然な業務的操作を実行できる場所


```
                +---------+
                | entity1 |
+---------+ ->  +---------+
| service |
+---------+ ->  +---------+
                | entity2 |
                +---------+

```

### ドメインイベント

- 集約がドメインイベントを発行する

# モジュール

- ユビキタス言語を用いてモジュールを設計することが重要
- モジュールの中には関連するドメインオブジェクトだけを含めるべきである
